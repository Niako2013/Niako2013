;/*FB_PKG_DELIM*/

__d("FDSVideoFilled12Icon",["cr:15854"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:15854")}),98);
__d("CometMediaViewerFilmstrip.react",["fbt","CometBackgroundImage.react","CometImage.react","CometPressable.react","CometThrottle","FDSIcon.react","FDSVideoFilled12Icon","Locale","MWMediaGalleryVideoThumbnail.react","MWVideoPlayerPlayButton.react","gkx","react","react-compiler-runtime","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;b.useCallback;var l=b.useEffect,m=b.useRef,n=b.useState,o=c("gkx")("1775"),p={imageInner:{height:"x5yr21d",objectFit:"x19kjcj4",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xh8yej3",$$css:!0},maxRootWidth:{maxWidth:"x193iq5w",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",transitionDuration:"xu6gjpd",transitionProperty:"x11xpdln",transitionTimingFunction:"x1r7x56h",whiteSpace:"xuxw1ft",$$css:!0},rootOverflow:{overflowX:"xw2csxc",overflowY:"x10wlt62",overscrollBehavior:"xish69e",$$css:!0},thumbnail:{borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",cursor:"x1ypdohk",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},thumbnailContainer:{display:"x1rg5ohu",flexShrink:"x2lah0s",$$css:!0},thumbnailFocusRing:{borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",$$css:!0},thumbnailNonActive:{opacity:"xti2d7y",":hover_opacity":"x5z6fxw",$$css:!0},thumbnailNonActiveDarken:{filter:"x1vra34",":hover_filter":"x19oicha",$$css:!0}},q={2:{marginStart:"x12mruv9",marginEnd:"xfs2ol5",marginLeft:null,marginRight:null,$$css:!0},6:{marginStart:"x1mnrxsn",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,$$css:!0}},r={36:{width:"x14qfxbe",$$css:!0},40:{width:"x100vrsf",$$css:!0}},s={36:{height:"xc9qbxq",$$css:!0},40:{height:"x1vqgdyp",$$css:!0}};function t(a){var b=d("react-compiler-runtime").c(40),e;b[0]!==a.image.backgroundColor||b[1]!==a.image.isUseImageResizing||b[2]!==a.image.mediaType?(e=a.image.mediaType!=="video"&&Boolean(a.image.isUseImageResizing)?{backgroundColor:a.image.backgroundColor}:{},b[0]=a.image.backgroundColor,b[1]=a.image.isUseImageResizing,b[2]=a.image.mediaType,b[3]=e):e=b[3];e=e;var f=a.image.mediaType!=="video"?a.image.uri:a.image.thumbnailUri,g=a.thumbnailMargin,j=a.thumbnailSize,n=a.thumbnailUseDarken;n=n?p.thumbnailNonActiveDarken:p.thumbnailNonActive;var t="comet-media-viewer-filmstrip-thubmnail-"+a.index,u=m(null),v;b[4]!==a.active||b[5]!==a.canScrollToActiveThumbnail?(v=function(){if(a.active&&a.canScrollToActiveThumbnail&&o){var b;(b=u.current)==null?void 0:b.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},b[4]=a.active,b[5]=a.canScrollToActiveThumbnail,b[6]=v):v=b[6];var w=v,x;b[7]!==w?(v=function(){w()},x=[w],b[7]=w,b[8]=v,b[9]=x):(v=b[8],x=b[9]);l(v,x);b[10]!==w?(v=function(){if(!o)return;var a=c("CometThrottle")(w,100);window.addEventListener("resize",a);return function(){window.removeEventListener("resize",a)}},x=[w],b[10]=w,b[11]=v,b[12]=x):(v=b[11],x=b[12]);l(v,x);b[13]!==g||b[14]!==j?(v=(i||(i=c("stylex"))).props([p.thumbnailContainer,s[j],r[j],q[g]]),b[13]=g,b[14]=j,b[15]=v):v=b[15];b[16]!==a.index?(x=h._(/*BTDS*/"__JHASH__4fCl582nKTG__JHASH__",[h._param("index",a.index)]),b[16]=a.index,b[17]=x):x=b[17];g=a.onClick;var y=s[j];j=r[j];n=a.active!==!0&&n;var z;b[18]!==j||b[19]!==n||b[20]!==y?(z=(i||(i=c("stylex")))(p.thumbnail,y,j,n),b[18]=j,b[19]=n,b[20]=y,b[21]=z):z=b[21];b[22]!==f||b[23]!==a.alt||b[24]!==a.image.isUseImageResizing||b[25]!==a.image.mediaType||b[26]!==a.image.uri?(j=a.image.mediaType==="video"?k.jsxs(k.Fragment,{children:[c("gkx")("8622")===!0?k.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 x3igimt xl56j7k x10l6tqk x1qrby5j"},{children:k.jsx(c("MWVideoPlayerPlayButton.react"),{isVisible:!0,size:"SMALL"})})):k.jsx("div",babelHelpers["extends"]({className:"x6s0dn4 x78zum5 x3igimt xl56j7k x10l6tqk x1qrby5j"},{children:k.jsx(c("FDSIcon.react"),{color:"white",icon:c("FDSVideoFilled12Icon")})})),k.jsx(c("MWMediaGalleryVideoThumbnail.react"),{fallbackVideoUrl:a.image.uri,previewUrl:f})]}):Boolean(a.image.isUseImageResizing)?k.jsx(c("CometImage.react"),{src:f,xstyle:p.imageInner}):k.jsx(c("CometBackgroundImage.react"),{alt:a.alt,src:f}),b[22]=f,b[23]=a.alt,b[24]=a.image.isUseImageResizing,b[25]=a.image.mediaType,b[26]=a.image.uri,b[27]=j):j=b[27];b[28]!==e||b[29]!==z||b[30]!==j?(n=k.jsx("div",{className:z,style:e,children:j}),b[28]=e,b[29]=z,b[30]=j,b[31]=n):n=b[31];b[32]!==a.onClick||b[33]!==n||b[34]!==x?(y=k.jsx(c("CometPressable.react"),{display:"block",label:x,onPress:g,overlayDisabled:!0,xstyle:p.thumbnailFocusRing,children:n}),b[32]=a.onClick,b[33]=n,b[34]=x,b[35]=y):y=b[35];b[36]!==y||b[37]!==v||b[38]!==t?(f=k.jsx("div",babelHelpers["extends"]({},v,{"data-testid":void 0,ref:u,children:y})),b[36]=y,b[37]=v,b[38]=t,b[39]=f):f=b[39];return f}function a(a){var b=d("react-compiler-runtime").c(26),e=n(0),f=e[0],g=e[1],h=m(null),j=m(null),q=m(null);e=n(!1);var r=e[0],u=e[1];e=a.thumbnailMargin;var v=a.thumbnailSize,w=a.thumbnailUseDarken,x=e===void 0?6:e,y=v===void 0?36:v,z=w===void 0?!1:w,A=y+x*2;b[0]!==a.activeIndex||b[1]!==a.images.length||b[2]!==A||b[3]!==f?(e=function(){var b=function(){if(h.current!=null){var b=h.current,c=b.offsetWidth;b=b.scrollWidth;var d=q.current;if(b===c)return;b=-f/A;var e=Math.floor((c+-f)/A),i=b+Math.floor((e-b)/2);if(d!=null){if(a.activeIndex>d&&(a.activeIndex<i||e===a.images.length)){q.current=a.activeIndex;return}if(a.activeIndex<d&&(a.activeIndex>i||b===0)){q.current=a.activeIndex;return}}i=f-(a.activeIndex-((e=d)!=null?e:0))*A;i=Math.min(0,i);i=Math.max(Math.floor(c-a.images.length*A),i);q.current=a.activeIndex;g(i)}};if(o)return;b();j.current!=null&&window.removeEventListener("resize",j.current);b=c("CometThrottle")(b,100);j.current=b;window.addEventListener("resize",b);return function(){j.current!=null&&window.removeEventListener("resize",j.current)}},b[0]=a.activeIndex,b[1]=a.images.length,b[2]=A,b[3]=f,b[4]=e):e=b[4];b[5]!==a.activeIndex||b[6]!==a.images||b[7]!==A||b[8]!==f?(v=[a.images,a.activeIndex,f,A],b[5]=a.activeIndex,b[6]=a.images,b[7]=A,b[8]=f,b[9]=v):v=b[9];l(e,v);b[10]===Symbol["for"]("react.memo_cache_sentinel")?(w=function(){u(!0)},e=[],b[10]=w,b[11]=e):(w=b[10],e=b[11]);l(w,e);if(a.images.length<2)return null;v=s[y];b[12]!==v?(w=(i||(i=c("stylex")))([p.root,v,o?p.rootOverflow:p.maxRootWidth]),b[12]=v,b[13]=w):w=b[13];b[14]!==f?(e=o?void 0:{transform:"translate3d("+(d("Locale").isRTL()?-f:f)+"px, 0, 0)"},b[14]=f,b[15]=e):e=b[15];b[16]!==r||b[17]!==a||b[18]!==x||b[19]!==y||b[20]!==z?(v=a.images.map(function(b,c){return k.jsx(t,{active:a.activeIndex===c,alt:b.alt,canScrollToActiveThumbnail:r,image:b,index:c,onClick:function(b){a.onSetImage(c)},thumbnailMargin:x,thumbnailSize:y,thumbnailUseDarken:z},"thumbnail_"+c)}),b[16]=r,b[17]=a,b[18]=x,b[19]=y,b[20]=z,b[21]=v):v=b[21];var B;b[22]!==v||b[23]!==w||b[24]!==e?(B=k.jsx("div",{className:w,ref:h,style:e,children:v}),b[22]=v,b[23]=w,b[24]=e,b[25]=B):B=b[25];return B}g["default"]=a}),226);